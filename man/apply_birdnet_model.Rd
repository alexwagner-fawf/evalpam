% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fct_birdnet_run.R
\name{apply_birdnet_model}
\alias{apply_birdnet_model}
\title{Apply BirdNET model to an audio file}
\usage{
apply_birdnet_model(
  audio_file = list.files(system.file("extdata", package = "birdnetR"), pattern = ".mp3",
    full.names = TRUE),
  birdnet_setup,
  batch_size = 1L,
  use_arrow = FALSE,
  birdnet_params = NULL,
  retry_n = 3L,
  retry_wait_s = 5
)
}
\arguments{
\item{audio_file}{Character. Path to an audio file.}

\item{birdnet_setup}{List. Object returned by [setup_birdnet_model()].}

\item{batch_size}{Integer. Batch size for inference.}

\item{use_arrow}{Logical. Whether to use Apache Arrow for IO.}

\item{birdnet_params}{List. Optional list of BirdNET inference parameters.}

\item{retry_n}{Integer. Maximum number of additional attempts after the
first failure for transient file-access and inference errors (default 3).
Set to 0 to disable retries entirely.}

\item{retry_wait_s}{Numeric. Seconds to wait between retry attempts
(default 5). Waits are doubled on each successive attempt (exponential
back-off) up to a ceiling of 60 seconds.}
}
\value{
A list containing the prediction results and parameters used, or a
  list with `prediction_raw = NULL` and an `error` field describing the
  failure if the file could not be processed.
}
\description{
Runs BirdNET inference on a single audio file using a pre-configured
BirdNET setup object created by [setup_birdnet_model()].
}
\details{
File existence, readability, and size are checked with an optional retry
loop (controlled by `retry_n` and `retry_wait_s`) to handle files on
network-mounted or slow storage that may appear transiently unavailable.
Inference itself is similarly retried on transient I/O-class errors.
}
\examples{
\dontrun{
bnm <- setup_birdnet_model(version = "v2.4")

# With default retries (3 attempts, 5 s initial wait)
res <- apply_birdnet_model("example.wav", bnm)

# No retries â€“ fail fast
res <- apply_birdnet_model("example.wav", bnm, retry_n = 0)

head(res$prediction_raw)
}
}
