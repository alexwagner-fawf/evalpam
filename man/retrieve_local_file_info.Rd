% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fct_file_info_retrieve.R
\name{retrieve_local_file_info}
\alias{retrieve_local_file_info}
\title{Retrieve Local File Information for Audio Deployments}
\usage{
retrieve_local_file_info(
  project_id,
  project_folder,
  folder_depth = 2,
  force_tz = NULL,
  parse_datetime = TRUE,
  custom_parse_fun = NULL,
  force_exif = FALSE,
  default_required_annotation_type_id = 3
)
}
\arguments{
\item{project_id}{Integer. Unique identifier for the project as provided in the database.}

\item{project_folder}{Character. Path to the root project folder containing
deployment subdirectories.}

\item{folder_depth}{Integer. Number of folder levels to traverse from
`project_folder` to reach deployment directories. Default is 2.}

\item{force_tz}{Character or NULL. Timezone to force for timestamp data
(e.g., "UTC", "America/New_York"). If NULL, no timezone conversion is applied.
Default is NULL.}

\item{parse_datetime}{Logical. If TRUE, parses timestamps from filenames using
a custom or default parsing function. If FALSE, uses EXIF metadata timestamps.
Default is TRUE.}

\item{custom_parse_fun}{Function or NULL. Custom function to parse timestamps
from relative file paths. Should take a character vector of paths and return
POSIXct timestamps. If NULL, uses default parsing (expects format
"YYYYMMDD_HHMMSS" in filename). Default is NULL.}

\item{force_exif}{Logical. If TRUE, forces re-reading of EXIF data even if
audio file index already exists. Default is FALSE.}

\item{default_required_annotation_type_id}{Integer. Default annotation type ID
to assign to all audio files. Default is 3 (which .}
}
\value{
List of created audio_file_indices + list of deployment_index. Function is also called for its side effects:
  \itemize{
    \item Creates or updates `deployment_index.csv` in project folder
    \item Creates `<deployment_name>_audio_file_index.csv` for each deployment
  }
}
\description{
Scans a project folder structure to index audio files and extract metadata
from EXIF data. Creates deployment and audio file index CSV files with
timestamps, file paths, and technical specifications.
}
\details{
The function performs the following steps:
\enumerate{
  \item Traverses the folder structure to the specified depth to identify deployments
  \item Creates deployment names by concatenating folder path components
  \item For each deployment, extracts EXIF metadata from audio files (or reads
    from existing index if available)
  \item Parses or extracts timestamps from files
  \item Calculates start and end datetimes for each deployment
  \item Creates/updates deployment index with metadata placeholders
}

Timestamp extraction follows this priority (when `parse_datetime = FALSE`):
\enumerate{
  \item MediaCreateDate (from EXIF)
  \item CreateDate (from EXIF)
  \item FileModifyDate (from EXIF)
}
}
